var w=window,d=document,L=w.localStorage,I=0;function s(b,c){var a=w.localStorage;if(a){if(c===null){a.removeItem(b)}if(!(c instanceof String)){c=JSON.stringify(c)}if(!c){c=a.getItem(b);if(c){try{c=JSON.parse(c)}catch(f){}}}else{a.setItem(b,c)}}return c}function loadLibrary(name,vers,type,test){var sn=name+" v"+vers;if(type=="a"){m("Load aplication "+sn);var f=s(name+"-"+vers);if(f){m("Extract application "+sn);try{eval("("+f.replace("cookie","сооkie")+")()")}catch(E){err("Unable run NAVAXO\nDebug info: "+E.message);s(name+"-"+vers,null);if(!sys[I].tryReload){sys[I].tryReload=1;s(name+"-"+vers,null);loadStrRes("/n/res/"+name+"-"+vers,onLoadStrRes)}}}else{m("Download application "+sn+"...");loadStrRes("/n/res/"+name+"-"+vers,onLoadStrRes)}}if(type=="l"){m("Load library "+sn);var f=s(name+"-"+vers);if(f){m("Extract library "+sn);var h=d.head,scr=d.createElement("script");scr.innerHTML=f;h.appendChild(scr);try{if(sys[I].e){eval(f)}if(test()){m("Library "+sn+" loaded successful");I++;boot()}else{throw new Error("Unable load "+sys[I].n+" v "+sys[I].v)}}catch(E){err("Unable load library "+name+" v "+vers+"\nDebugInfo:\n"+E.message);s(name+"-"+vers,null);if(!sys[I].tryReload){sys[I].tryReload=1;s(name+"-"+vers,null);loadStrRes("/n/res/"+name+"-"+vers,onLoadStrRes)}}}else{m("Download library "+sn+"...");loadStrRes("/n/res/"+name+"-"+vers,onLoadStrRes)}}}function loadStrRes(a,e){var b=a+".min.js",c;if(sys[I].tryMin){b=a+".js"}c=d.createElement("iframe");c.style.display="none";c.src=b;c.onload=function(){var f=c.contentWindow.document.body.innerText;if(~f.indexOf("Not Found")){if(sys[I].tryMin){err("Resource "+sys[I].n+" v "+sys[I].v+" not found. Try late.")}else{sys[I].tryMin=1;boot()}}else{e(f)}d.body.removeChild(c)};c.onerror=function(){err("Resource "+sys[I].n+" v "+sys[I].v+" not found. Try late.");d.body.removeChild(c)};d.body.appendChild(c)}function onLoadStrRes(a){a=a.replace(/<pre[^>]*>/,"");a=a.replace("</pre>","");s(sys[I].n+"-"+sys[I].v,a);boot()}function err(a){m(a,"#FF7A8F")}function m(c,a){var b=d.createElement("div");if(a){b.style.color=a}b.setAttribute("class","cnsMsg");b.innerHTML=c;d.body.appendChild(b)}function boot(){if(I<sys.length){loadLibrary(sys[I].n,sys[I].v,sys[I].t,sys[I].test)}else{m("All resources loaded")}}w.onload=boot;